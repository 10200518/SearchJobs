---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
  // a qui va la base de datos
  const jobs = [
    {
      id: 1,
      title: "Desarrollador Frontend",
      company: "TechCorp",
      location: "Bogotá, Colombia",
      type: "Tiempo completo",
      experience: "2-3 años",
      postedDate: "Hace 2 días",
      logo: "/placeholder.svg?height=100&width=100",
      description: `
        <p>Estamos buscando un Desarrollador Frontend talentoso para unirse a nuestro equipo de tecnología en rápido crecimiento. Como Desarrollador Frontend, serás responsable de implementar interfaces de usuario atractivas y funcionales que brinden una experiencia excepcional al usuario.</p>
        
        <h4>Responsabilidades:</h4>
        <ul>
          <li>Desarrollar interfaces de usuario responsivas y accesibles utilizando HTML, CSS y JavaScript</li>
          <li>Trabajar con frameworks modernos como React, Vue o Angular</li>
          <li>Colaborar con diseñadores UX/UI para implementar diseños y prototipos</li>
          <li>Optimizar aplicaciones para máxima velocidad y escalabilidad</li>
          <li>Asegurar la compatibilidad entre navegadores y dispositivos</li>
          <li>Participar en revisiones de código y ayudar a mantener estándares de calidad</li>
        </ul>
        
        <h4>Requisitos:</h4>
        <ul>
          <li>2-3 años de experiencia en desarrollo frontend</li>
          <li>Sólidos conocimientos de HTML5, CSS3 y JavaScript (ES6+)</li>
          <li>Experiencia con al menos un framework moderno (React, Vue, Angular)</li>
          <li>Familiaridad con herramientas de construcción como Webpack, Vite o similares</li>
          <li>Conocimiento de metodologías CSS como BEM, SMACSS o similares</li>
          <li>Experiencia con control de versiones Git</li>
          <li>Capacidad para trabajar en equipo y comunicarse efectivamente</li>
        </ul>
        
        <h4>Beneficios:</h4>
        <ul>
          <li>Salario competitivo</li>
          <li>Horario flexible</li>
          <li>Trabajo remoto parcial</li>
          <li>Oportunidades de crecimiento profesional</li>
          <li>Ambiente de trabajo colaborativo e innovador</li>
          <li>Seguro médico</li>
        </ul>
      `,
    },
    // Aquí irían más trabajos
  ];

  return jobs.map(job => ({
    params: { id: job.id.toString() },
    props: { job },
  }));
}

const { job } = Astro.props;
---

<Layout title={`${job.title} en ${job.company} | SearchJobs`}>
  <Header slot="header" />
  
  <div class="container">
    <div class="back-link">
      <a href="/empleos">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
        Volver a empleos
      </a>
    </div>

    <div class="job-header">
      <div class="job-header-content">
        <div class="company-logo">
          <img src={job.logo || "/placeholder.svg"} alt={`${job.company} logo`} width="100" height="100" />
        </div>

        <div class="job-info">
          <h1 class="job-title">{job.title}</h1>
          <h2 class="company-name">{job.company}</h2>

          <div class="job-meta">
            <div class="job-meta-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="job-meta-icon">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              <span>{job.location}</span>
            </div>
            <div class="job-meta-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="job-meta-icon">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
              <span>{job.type}</span>
            </div>
            <div class="job-meta-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="job-meta-icon">
                <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
              </svg>
              <span>{job.experience}</span>
            </div>
            <div class="job-meta-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="job-meta-icon">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
              <span>{job.postedDate}</span>
            </div>
          </div>
        </div>

        <div class="job-actions">
          <button class="action-button" aria-label="Compartir">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="18" cy="5" r="3"></circle>
              <circle cx="6" cy="12" r="3"></circle>
              <circle cx="18" cy="19" r="3"></circle>
              <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
              <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
          </button>
          <button class="action-button" aria-label="Guardar">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
            </svg>
          </button>
        </div>
      </div>

      <div class="apply-button-container">
        <a href="#apply-form" class="btn btn-primary apply-button">
          Postularme ahora
        </a>
      </div>
    </div>

    <div class="content-container">
      <div class="job-description">
        <h3 class="section-title">Descripción del empleo</h3>
        <div class="description-content" set:html={job.description} />
      </div>

      <div class="sidebar">
        <div class="sidebar-card">
          <h3 class="sidebar-title">Resumen</h3>
          <div class="sidebar-content">
            <div class="sidebar-item">
              <span class="sidebar-item-label">Empresa:</span>
              <span class="sidebar-item-value">{job.company}</span>
            </div>
            <div class="sidebar-item">
              <span class="sidebar-item-label">Ubicación:</span>
              <span class="sidebar-item-value">{job.location}</span>
            </div>
            <div class="sidebar-item">
              <span class="sidebar-item-label">Tipo:</span>
              <span class="sidebar-item-value">{job.type}</span>
            </div>
            <div class="sidebar-item">
              <span class="sidebar-item-label">Experiencia:</span>
              <span class="sidebar-item-value">{job.experience}</span>
            </div>
            <div class="sidebar-item">
              <span class="sidebar-item-label">Publicado:</span>
              <span class="sidebar-item-value">{job.postedDate}</span>
            </div>
          </div>

          <a href="#apply-form" class="btn btn-primary sidebar-button">
            Postularme
          </a>
        </div>

        <div class="sidebar-card">
          <h3 class="sidebar-title">Comparte este empleo</h3>
          <div class="share-buttons">
            <button class="share-button share-facebook">Facebook</button>
            <button class="share-button share-twitter">Twitter</button>
            <button class="share-button share-linkedin">LinkedIn</button>
          </div>
        </div>
      </div>
    </div>

    <div class="apply-section" id="apply-form">
      <h2 class="apply-title">Postularme a: {job.title}</h2>
      
      <form class="apply-form">
        <div class="form-group">
          <label for="name">Nombre completo</label>
          <input type="text" id="name" name="name" class="form-control" required />
        </div>

        <div class="form-group">
          <label for="email">Correo electrónico</label>
          <input type="email" id="email" name="email" class="form-control" required />
        </div>

        <div class="form-group">
          <label for="phone">Teléfono</label>
          <input type="tel" id="phone" name="phone" class="form-control" required />
        </div>

        <div class="form-group">
          <label for="resume">Currículum (PDF)</label>
          <div class="file-input">
            <input type="file" id="resume" name="resume" accept=".pdf,.doc,.docx" required class="file-input-hidden" />
            <div class="file-input-wrapper">
              <button type="button" class="file-input-button" id="fileButton">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="17 8 12 3 7 8"></polyline>
                  <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                Seleccionar archivo
              </button>
              <span class="file-input-text" id="fileName">Ningún archivo seleccionado</span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="coverLetter">Carta de presentación (opcional)</label>
          <textarea
            id="coverLetter"
            name="coverLetter"
            class="form-control textarea"
            rows="5"
            placeholder="Cuéntanos por qué eres el candidato ideal para este puesto..."
          ></textarea>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary submit-button">
            Enviar postulación
          </button>
        </div>
      </form>
    </div>
  </div>

  <Footer slot="footer" />
</Layout>

<script>
    // Script para mostrar el nombre del archivo seleccionado
    document.addEventListener('DOMContentLoaded', () => {
      const fileInput = document.getElementById('resume');
      const fileButton = document.getElementById('fileButton');
      const fileName = document.getElementById('fileName');
      
      if (fileInput && fileButton && fileName) {
        fileButton.addEventListener('click', () => {
          fileInput.click();
        });
        
        fileInput.addEventListener('change', (e) => {
          const input = e.target;
          if (input instanceof HTMLInputElement && input.files && input.files.length > 0) {
            fileName.textContent = input.files[0].name;
          } else {
            fileName.textContent = 'Ningún archivo seleccionado';
          }
        });
      }
    });
</script>


